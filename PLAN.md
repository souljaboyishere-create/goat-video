---
name: AI Video Creation Platform Architecture
overview: Complete technical architecture for an AI-powered video/audio creation platform with modular pipeline, supporting video editing, face transformation, voice cloning, lip-sync, and multi-format export. Web-first with TypeScript frontend/backend and Python AI workers.
todos:
  - id: setup-monorepo
    content: Set up monorepo structure with pnpm/npm workspaces, initialize apps/web (Next.js) and apps/api (Node.js/Fastify)
    status: pending
  - id: setup-database
    content: Initialize PostgreSQL database with Prisma, create schema for Project, Clip, Job, Character, Voice, Render models
    status: pending
    dependencies:
      - setup-monorepo
  - id: implement-auth
    content: Implement basic authentication (email/password) with JWT tokens in backend API
    status: pending
    dependencies:
      - setup-database
  - id: project-crud
    content: Create project CRUD APIs and basic project list/detail UI in frontend
    status: pending
    dependencies:
      - implement-auth
  - id: video-downloader
    content: Build video downloader worker (Python) using yt-dlp for YouTube, Rumble, X/Twitter, TikTok, Instagram
    status: pending
    dependencies:
      - setup-monorepo
  - id: basic-editor
    content: Build basic video editor UI with timeline, clip trimming, and preview player
    status: pending
    dependencies:
      - project-crud
  - id: tts-integration
    content: Integrate Coqui TTS library into voice-cloner worker, create TTS wrapper service
    status: pending
    dependencies:
      - setup-monorepo
  - id: voice-cloning
    content: Implement voice cloning API and UI, allow users to clone voices from audio samples
    status: pending
    dependencies:
      - tts-integration
      - basic-editor
  - id: face-transformation
    content: Build face transformer worker using InsightFace + Stable Diffusion, create character library UI
    status: pending
    dependencies:
      - basic-editor
  - id: job-queue
    content: Implement Redis-based job queue system (BullMQ) with job status tracking and WebSocket updates
    status: pending
    dependencies:
      - setup-database
  - id: lip-sync
    content: Integrate Wav2Lip or similar for AI lip-sync generation in lip-sync worker
    status: pending
    dependencies:
      - voice-cloning
  - id: subtitle-system
    content: Build subtitle generator worker using Whisper, create subtitle editor UI with translation support
    status: pending
    dependencies:
      - basic-editor
  - id: background-replacement
    content: Implement background replacer worker using Stable Diffusion Inpainting
    status: pending
    dependencies:
      - face-transformation
  - id: multi-format-export
    content: Build video renderer worker for final composition and multi-format export (9:16, 16:9, 1:1)
    status: pending
    dependencies:
      - job-queue
---

# AI Video Creation Platform - Technical Architecture Plan

## Folder Evaluation

### TTS Folder (Highly Relevant)

The Coqui TTS library provides:

- **Voice cloning**: XTTS v2 (16 languages), YourTTS (multilingual voice cloning)
- **Voice conversion**: FreeVC for converting voices
- **Multi-lingual TTS**: 1100+ languages via Fairseq models
- **Emotion/style control**: Via model fine-tuning and parameters
- **Production-ready**: Python API, server mode, Docker support

**Integration Strategy**: Use TTS as the core voice cloning/TTS engine. Wrap it in a Python worker service with REST API.

### InterLingual Folder (Minimally Relevant)

SwiftUI iOS app for multi-language video playback with audio/caption track selection. Only relevant as a reference for subtitle/caption data structures. Not needed for the web platform.

---

## System Architecture

```mermaid
graph TB
    subgraph frontend [Frontend - Next.js/React]
        UI[Web UI]
        Editor[Video Editor - Preview Only]
        Preview[Preview Player]
    end
    
    subgraph backend [Backend API - Fastify/TypeScript]
        API[REST API]
        WS[WebSocket Hub]
        Auth[Auth Service]
        DB[(PostgreSQL)]
        Cache[(Redis)]
        Queue[BullMQ Job Queue]
        Storage[S3/Storage]
    end
    
    subgraph workers [AI Workers - Python/FastAPI]
        Download[Video Downloader HTTP]
        VideoEdit[Video Editor HTTP]
        FaceTransform[Face Transformer HTTP]
        VoiceClone[Voice Cloner HTTP]
        LipSync[Lip-Sync Generator HTTP]
        Subtitle[Subtitle Generator HTTP]
        Render[Video Renderer HTTP]
    end
    
    UI -->|REST| API
    Editor -->|REST| API
    Preview -->|REST| API
    UI -->|WebSocket| WS
    Editor -->|WebSocket| WS
    API --> Auth
    API --> DB
    API --> Cache
    API --> Queue
    API --> Storage
    Queue -->|HTTP POST| Download
    Queue -->|HTTP POST| VideoEdit
    Queue -->|HTTP POST| FaceTransform
    Queue -->|HTTP POST| VoiceClone
    Queue -->|HTTP POST| LipSync
    Queue -->|HTTP POST| Subtitle
    Queue -->|HTTP POST| Render
    Download -->|Status Update| API
    VideoEdit -->|Status Update| API
    FaceTransform -->|Status Update| API
    VoiceClone -->|Status Update| API
    LipSync -->|Status Update| API
    Subtitle -->|Status Update| API
    Render -->|Status Update| API
    API -->|Progress| WS
    Download --> Storage
    VideoEdit --> Storage
    FaceTransform --> Storage
    VoiceClone --> Storage
    LipSync --> Storage
    Subtitle --> Storage
    Render --> Storage
```

---

## Tech Stack

### Frontend

- **Framework**: Next.js 14+ (App Router) with TypeScript
- **UI Library**: React 18+, Tailwind CSS, shadcn/ui
- **Video Editing**: Fabric.js or Konva.js for canvas manipulation, FFmpeg.wasm for PREVIEW ONLY (not final rendering)
- **State Management**: Zustand or React Query
- **Real-time**: WebSockets via backend (Fastify WebSocket) for job status updates
- **Rule**: Frontend = preview & intent, Backend/Workers = truth & rendering

### Backend API

- **Runtime**: Node.js 20+ with TypeScript
- **Framework**: Fastify (chosen for better WebSocket + queue performance, cleaner TypeScript types)
- **Database**: PostgreSQL 15+ (with Prisma ORM)
- **Cache/Queue**: Redis 7+ (BullMQ for job queues - ONLY queue system)
- **Storage**: AWS S3 or compatible (MinIO for local dev)
- **Auth**: JWT with bcrypt
- **File Upload**: Direct S3 presigned URLs (preferred) or multipart
- **WebSockets**: @fastify/websocket for real-time job updates

### AI Workers (Python)

- **Runtime**: Python 3.10-3.11
- **Framework**: FastAPI for HTTP REST endpoints (workers are dumb executors)
- **Queue Management**: NONE - workers expose HTTP endpoints, backend manages all queues via BullMQ
- **TTS/Voice**: Coqui TTS (from TTS folder)
- **Video Processing**: FFmpeg-python, MoviePy, OpenCV
- **Face Transformation**: Phased approach - InsightFace (detection) → Simple face swap → Stable Diffusion (later)
- **Lip-Sync**: Wav2Lip or similar
- **Subtitle**: Whisper (OpenAI) or faster-whisper
- **Background**: Stable Diffusion Inpainting or Remove.bg API (stub initially)
- **GPU**: PyTorch, CUDA support

### Infrastructure

- **Containerization**: Docker, Docker Compose
- **Orchestration**: Kubernetes (production) or Docker Swarm
- **CDN**: CloudFlare or AWS CloudFront
- **Monitoring**: Prometheus + Grafana
- **Logging**: ELK Stack or Loki

---

## Core Data Models

### Project

```typescript
interface Project {
  id: string;
  userId: string;
  name: string;
  description?: string;
  timeline: Timeline; // JSON data structure, NOT media - enables undo/redo, versioning, collaboration
  settings: ProjectSettings;
  format: VideoFormat; // 9:16, 16:9, 1:1
  createdAt: Date;
  updatedAt: Date;
  status: 'draft' | 'processing' | 'completed' | 'failed';
}

// Timeline is pure data - rendering is pure function(timeline, assets)
// This enables: undo/redo, versioning, future collaboration
```

### Clip

```typescript
interface Clip {
  id: string;
  projectId: string;
  sourceType: 'url' | 'upload' | 'generated';
  sourceUrl?: string;
  filePath: string;
  startTime: number;
  endTime: number;
  transformations: Transformation[];
  audioTrack?: AudioTrack;
  subtitles?: SubtitleTrack[];
  metadata: ClipMetadata;
}
```

### Scene

```typescript
interface Scene {
  id: string;
  projectId: string;
  clips: Clip[];
  transitions: Transition[];
  duration: number;
  order: number;
}
```

### Character

```typescript
interface Character {
  id: string;
  userId: string;
  name: string;
  type: 'historical' | 'avatar' | 'custom';
  faceModel?: string; // Path to model file
  voiceProfile?: string; // Voice embedding
  appearanceConfig: AppearanceConfig;
  createdAt: Date;
}
```

### Voice

```typescript
interface Voice {
  id: string;
  userId: string;
  name: string;
  type: 'cloned' | 'preset' | 'synthetic';
  embedding?: number[]; // Voice embedding vector
  sourceAudio?: string; // Path to reference audio
  language: string;
  emotion?: string;
  style?: string;
  createdAt: Date;
}
```

### Job

```typescript
// Job types - locked early for queue routing, analytics, per-job limits
type JobType =
  | 'video_download'
  | 'clip_edit'
  | 'face_transform'
  | 'voice_clone'
  | 'lip_sync'
  | 'subtitle_generate'
  | 'background_replace'
  | 'render';

interface Job {
  id: string;
  userId: string;
  projectId?: string;
  type: JobType;
  status: 'queued' | 'processing' | 'completed' | 'failed';
  input: Record<string, any>;
  output?: Record<string, any>;
  error?: string;
  progress: number; // 0-100
  idempotencyKey?: string; // hash(projectId + action + params) - prevents duplicate GPU work
  createdAt: Date;
  startedAt?: Date;
  completedAt?: Date;
}

// Backend rule: Same idempotencyKey + status != failed → return existing job
// Prevents duplicate GPU work (huge cost saver)
```

### Render

```typescript
interface Render {
  id: string;
  projectId: string;
  jobId: string;
  format: VideoFormat;
  resolution: string;
  filePath: string;
  thumbnailPath: string;
  duration: number;
  fileSize: number;
  status: 'processing' | 'completed' | 'failed';
  modelVersion?: string; // AI model version used (for reproducibility)
  watermark?: boolean; // Whether watermark was applied
  createdAt: Date;
}
```

### AI Output Metadata

All AI job outputs MUST include:

```typescript
{
  modelVersion: string; // e.g., "xtts-v2", "wav2lip-v1.0", "insightface-v1"
  // ... other output fields
}
```

**Why this matters**:

- Re-renders must be reproducible
- You will upgrade models later
- Users may want "same voice as before"
- Store model version **with the asset**, not just the worker

---

## System Components

### 1. Frontend (`apps/web`)

#### Pages

- `/` - Dashboard (project list)
- `/projects/new` - New project wizard
- `/projects/[id]` - Video editor
- `/projects/[id]/preview` - Preview player
- `/characters` - Character library
- `/voices` - Voice library
- `/settings` - User settings

#### Key Components

- `VideoEditor`: Main editing interface with timeline
- `ClipLibrary`: Source video management
- `CharacterSelector`: Character/face transformation UI
- `VoiceSelector`: Voice cloning/selection UI
- `SubtitleEditor`: Subtitle creation/editing
- `ExportDialog`: Format selection and export
- `JobStatusBar`: Real-time job progress

### 2. Backend API (`apps/api`)

#### Routes

```
/api/auth/*          - Authentication
/api/projects/*      - Project CRUD
/api/clips/*         - Clip management
/api/characters/*    - Character management
/api/voices/*        - Voice management
/api/jobs/*          - Job status/management
/api/renders/*       - Render management
/api/storage/*       - File upload/download
```

#### Services

- `ProjectService`: Project business logic
- `JobService`: Job creation and status tracking
- `StorageService`: File upload/download handling
- `AuthService`: User authentication
- `WebSocketService`: Real-time updates

### 3. AI Workers (`workers/`)

#### Worker Services

**video-downloader** (`workers/video-downloader/`)

- Downloads from YouTube, Rumble, X/Twitter, TikTok, Instagram
- Uses yt-dlp or similar
- Outputs: Video file to storage

**video-editor** (`workers/video-editor/`)

- Clipping, cropping, combining clips
- Timeline editing operations
- Uses FFmpeg
- Outputs: Edited video segments

**face-transformer** (`workers/face-transformer/`)

- Face detection and transformation
- Historical character transformation
- Uses InsightFace + Stable Diffusion or FaceSwap
- Outputs: Transformed video

**voice-cloner** (`workers/voice-cloner/`)

- Voice cloning using Coqui TTS
- Text-to-speech with emotion/style
- Voice conversion
- Outputs: Audio file

**lip-sync** (`workers/lip-sync/`)

- AI lip-sync generation
- Uses Wav2Lip or similar
- Outputs: Lip-synced video

**subtitle-generator** (`workers/subtitle-generator/`)

- Speech-to-text (Whisper)
- Subtitle generation and editing
- Translation
- Outputs: SRT/VTT files

**background-replacer** (`workers/background-replacer/`)

- Background removal/replacement
- Environment generation
- Uses Stable Diffusion Inpainting
- Outputs: Video with new background

**video-renderer** (`workers/video-renderer/`)

- Final video composition
- Multi-format export (9:16, 16:9, 1:1)
- Uses FFmpeg
- **Watermark/disclosure support**: Optional watermark layer and metadata tags
- Outputs: Final rendered video

**Watermark/Disclosure Hook** (Strategic, Not Just Technical):

- Optional watermark layer in renderer (disabled by default)
- Optional metadata tag in output (EXIF/metadata)
- Platform compliance lever
- Enterprise / education unlock
- Safety valve if policies tighten
- **Support it now, enable later if needed**

---

## API Boundaries

### Frontend ↔ Backend

- **Protocol**: REST API + WebSocket
- **Format**: JSON
- **Auth**: JWT tokens in Authorization header
- **File Upload**: Multipart/form-data or S3 presigned URLs

### Backend ↔ Workers

- **Protocol**: HTTP REST (FastAPI endpoints on workers)
- **Format**: JSON
- **Auth**: API keys or service-to-service auth
- **Queue Management**: BullMQ ONLY in backend (no Celery/RQ)
- **Worker Pattern**: Workers are dumb executors - they expose HTTP endpoints, backend assigns jobs via BullMQ

### Worker Communication Flow

1. Backend creates job in BullMQ queue
2. Backend HTTP POSTs job to worker endpoint (or worker polls via HTTP)
3. Worker processes job, uploads results to S3/storage
4. Worker POSTs status update to Backend API endpoint
5. Backend updates job status in database and Redis
6. Backend emits progress via WebSocket to frontend
7. **NEVER**: Workers do NOT communicate directly with frontend

---

## Worker Contract (Standard Interface)

All workers MUST implement this contract for consistency, swappability, and mocking:

### Execute Endpoint

```http
POST /execute
Content-Type: application/json
Authorization: Bearer <worker_api_key>

{
  "jobId": "uuid",
  "type": "voice_clone",
  "input": {
    "sourceAudio": "s3://bucket/path/to/audio.wav",
    "text": "Hello world",
    "language": "en",
    ...
  }
}

Response: 200 OK
{
  "jobId": "uuid",
  "status": "accepted"
}
```

### Status Update Endpoint

```http
POST /status
Content-Type: application/json
Authorization: Bearer <worker_api_key>

{
  "jobId": "uuid",
  "progress": 42,
  "status": "processing",
  "output": {
    "filePath": "s3://bucket/path/to/output.wav",
    "duration": 5.2,
    ...
  }
}

Response: 200 OK
```

### Health Check

```http
GET /health

Response: 200 OK
{
  "status": "healthy",
  "gpu_available": true,
  "model_loaded": true
}
```

**Benefits**:

- Swap workers freely
- Mock workers easily for testing
- Scale horizontally without logic drift
- Consistent error handling

---

## Storage Paths Convention

**Lock this convention early** to avoid chaos:

```
s3://bucket/
  users/{userId}/
    projects/{projectId}/
      source/          # Original downloaded/uploaded videos
      clips/           # Edited clip segments
      audio/           # Voice clones, TTS outputs
      renders/         # Final rendered videos
      thumbnails/      # Preview thumbnails
      metadata/        # JSON files, subtitles, etc.
```

**Benefits**:

- Cleanup is trivial (delete entire user/project path)
- GDPR deletion is straightforward
- Cost audits are sane (per-user, per-project)
- Easy to implement lifecycle policies

---

## Job Queue & Rendering Pipeline

### Queue Architecture

```mermaid
graph TB
    API[Backend API] --> Queue[BullMQ in Redis]
    Queue -->|HTTP POST Job| W1[Download Worker HTTP]
    Queue -->|HTTP POST Job| W2[Edit Worker HTTP]
    Queue -->|HTTP POST Job| W3[Transform Worker HTTP]
    Queue -->|HTTP POST Job| W4[Voice Worker HTTP]
    Queue -->|HTTP POST Job| W5[LipSync Worker HTTP]
    Queue -->|HTTP POST Job| W6[Subtitle Worker HTTP]
    Queue -->|HTTP POST Job| W7[Render Worker HTTP]
    W1 -->|POST Status| API
    W2 -->|POST Status| API
    W3 -->|POST Status| API
    W4 -->|POST Status| API
    W5 -->|POST Status| API
    W6 -->|POST Status| API
    W7 -->|POST Status| API
    W1 --> Storage[Storage]
    W2 --> Storage
    W3 --> Storage
    W4 --> Storage
    W5 --> Storage
    W6 --> Storage
    W7 --> Storage
    API -->|WebSocket| Frontend[Frontend]
```

### Job Flow Example (Full Pipeline)

1. User creates project → Backend creates Project record
2. User adds video URL → Backend creates `download` job → Queue
3. Download worker processes → Uploads video → Updates job status
4. User applies face transformation → Backend creates `transform` job → Queue
5. Transform worker processes → Uploads result → Updates job status
6. User adds voice clone → Backend creates `voice_clone` job → Queue
7. Voice worker processes → Uploads audio → Updates job status
8. User triggers lip-sync → Backend creates `lip_sync` job → Queue
9. Lip-sync worker processes → Uploads video → Updates job status
10. User exports → Backend creates `render` job → Queue
11. Render worker processes → Uploads final video → Updates job status

### Job Priority & Batching

- **Priority levels**: High (user-triggered), Medium (auto-processing), Low (background)
- **Batching**: Group multiple clips for same transformation
- **Retry logic**: Exponential backoff for failed jobs
- **Timeout**: Jobs timeout after configurable duration

---

## Build Phases

### Phase 0: Foundation (Week 1-2)

**Goal**: Basic project structure and authentication

**Tasks**:

- Set up monorepo structure
- Initialize Next.js frontend
- Initialize Node.js backend with Fastify
- Set up PostgreSQL database with Prisma
- Implement basic auth (email/password)
- Create project CRUD APIs
- Basic project list/detail UI

**Deliverables**:

- User can sign up/login
- User can create/view projects
- Basic project data persistence

### Phase 1: MVP - Video Download & Basic Editing (Week 3-4)

**Goal**: Download videos and basic editing

**Tasks**:

- Implement video downloader worker (yt-dlp)
- Video upload functionality
- Basic video player in editor
- Clip trimming (start/end time)
- Simple timeline UI
- Video preview generation

**Deliverables**:

- User can download videos from URLs
- User can trim clips
- User can preview edited video

**Stubbing**: Use FFmpeg for basic operations, no AI yet

### Phase 2: V1 - Face Transformation & Voice Cloning (Week 5-7)

**Goal**: Core AI features

**Tasks**:

- Integrate Coqui TTS for voice cloning
- Implement face detection (InsightFace)
- Basic face transformation (stub initially, then real)
- Character library UI
- Voice library UI
- Audio replacement in timeline

**Deliverables**:

- User can clone voices from audio samples
- User can transform faces to characters
- User can replace audio in videos

**Stubbing Strategy**:

- **MUST be real early**: Video downloading (yt-dlp), FFmpeg trimming, Job queue, Coqui TTS
- **SHOULD be stubbed early**: Face transformation (placeholder output), Lip-sync (static alignment), Background replacement, Stable Diffusion anything
- Face transformation: Phase 1 = InsightFace detection + simple swap, Phase 2 = AI-based transformation
- Voice cloning: Use Coqui TTS (real, not stubbed)

### Phase 3: V1.5 - Lip-Sync & Subtitles (Week 8-9)

**Goal**: Lip-sync and subtitle features

**Tasks**:

- Integrate Wav2Lip or similar for lip-sync
- Integrate Whisper for speech-to-text
- Subtitle editor UI
- Subtitle translation (using translation API)
- Subtitle rendering in video

**Deliverables**:

- User can generate lip-sync for voice replacements
- User can generate/edit/translate subtitles
- Subtitles render in final video

### Phase 4: V2 - Background Replacement & Advanced Features (Week 10-12)

**Goal**: Complete feature set

**Tasks**:

- Background removal/replacement
- Environment generation (Stable Diffusion)
- Script rewriting (LLM integration)
- Multi-format export (9:16, 16:9, 1:1)
- Advanced timeline features (transitions, effects)
- Performance optimizations

**Deliverables**:

- User can replace backgrounds
- User can export in multiple formats
- Complete editing pipeline

---

## Monorepo Structure

```
video-ai-platform/
├── apps/
│   ├── web/                    # Next.js frontend
│   │   ├── src/
│   │   │   ├── app/            # Next.js app router
│   │   │   ├── components/     # React components
│   │   │   ├── lib/            # Utilities
│   │   │   └── types/          # TypeScript types
│   │   ├── public/
│   │   ├── package.json
│   │   └── next.config.js
│   │
│   └── api/                    # Node.js backend
│       ├── src/
│       │   ├── routes/         # API routes
│       │   ├── services/       # Business logic
│       │   ├── models/         # Data models
│       │   ├── middleware/     # Auth, validation
│       │   └── utils/
│       ├── prisma/             # Database schema
│       ├── package.json
│       └── tsconfig.json
│
├── workers/
│   ├── video-downloader/
│   │   ├── src/
│   │   │   ├── main.py
│   │   │   ├── downloader.py
│   │   │   └── utils.py
│   │   ├── requirements.txt
│   │   └── Dockerfile
│   │
│   ├── video-editor/
│   ├── face-transformer/
│   ├── voice-cloner/           # Uses Coqui TTS
│   ├── lip-sync/
│   ├── subtitle-generator/
│   ├── background-replacer/
│   └── video-renderer/
│
├── shared/
│   ├── types/                  # Shared TypeScript types
│   └── config/                 # Shared configs
│
├── infrastructure/
│   ├── docker/
│   │   ├── Dockerfile.api
│   │   ├── Dockerfile.web
│   │   └── docker-compose.yml
│   ├── k8s/                    # Kubernetes configs
│   └── scripts/                # Deployment scripts
│
├── packages/
│   └── tts-wrapper/            # Python wrapper for Coqui TTS
│       ├── src/
│       │   └── tts_service.py
│       └── requirements.txt
│
├── .github/
│   └── workflows/              # CI/CD
│
├── package.json                # Root package.json (workspaces)
├── pnpm-workspace.yaml         # or npm/yarn workspaces
├── docker-compose.yml          # Local development
├── README.md
└── .env.example
```

---

## Key Files to Create

### Backend API

- `apps/api/src/routes/projects.ts` - Project routes
- `apps/api/src/routes/jobs.ts` - Job management routes
- `apps/api/src/services/jobService.ts` - Job queue management
- `apps/api/src/services/storageService.ts` - File storage handling
- `apps/api/prisma/schema.prisma` - Database schema

### Frontend

- `apps/web/src/app/projects/[id]/page.tsx` - Video editor page
- `apps/web/src/components/VideoEditor.tsx` - Main editor component
- `apps/web/src/components/Timeline.tsx` - Timeline component
- `apps/web/src/hooks/useJobStatus.ts` - Job status hook

### Workers

- `workers/voice-cloner/src/main.py` - Voice cloning worker
- `workers/voice-cloner/src/tts_wrapper.py` - Coqui TTS integration
- `workers/face-transformer/src/main.py` - Face transformation worker
- `workers/video-downloader/src/downloader.py` - Video downloader

### Infrastructure

- `docker-compose.yml` - Local development setup
- `infrastructure/docker/Dockerfile.api` - Backend Dockerfile
- `infrastructure/docker/Dockerfile.worker` - Worker Dockerfile

---

## Risk, Safety & Scalability

### Risks

**Technical Risks**:

1. **GPU Costs**: AI processing is GPU-intensive and expensive

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Mitigation: Use spot instances, batch processing, model quantization

2. **Latency**: Complex pipelines can be slow

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Mitigation: Progress updates, background processing, caching

3. **Copyright**: Video downloading may violate ToS

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Mitigation: User agreement, rate limiting, respect robots.txt

4. **Deepfake Concerns**: Face transformation raises ethical issues

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Mitigation: Content warnings, user agreements, watermarking

**Business Risks**:

1. **Scalability**: High compute costs at scale

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Mitigation: Auto-scaling workers, job prioritization, cost monitoring

2. **Storage Costs**: Video files are large

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Mitigation: S3 lifecycle policies, compression, cleanup jobs

### Safety Measures

1. **Content Moderation**: 

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Scan uploaded/downloaded content for prohibited material
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Rate limiting on downloads
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - User reporting system

2. **Data Privacy**:

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Encrypt stored videos
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - GDPR compliance (data deletion)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Secure voice/face data storage

3. **Resource Limits**:

                                                - Per-user job limits
                                                - File size limits
                                                - Processing time limits
                                                - **Idempotency keys**: Prevent duplicate GPU work from double-clicks, network retries, worker crashes

4. **Watermark/Disclosure**:

                                                - Optional watermark layer in renderer (platform compliance)
                                                - Metadata tags in output (EXIF/metadata)
                                                - Enterprise / education unlock
                                                - Safety valve if policies tighten

### Scalability Considerations

1. **Horizontal Scaling**:

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Stateless API servers (scale horizontally)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Worker pool auto-scaling based on queue depth
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Database read replicas

2. **Caching Strategy**:

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Redis for job status, user sessions
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - CDN for static assets and rendered videos
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Database query caching

3. **Queue Management**:

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Separate queues by priority
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Worker affinity for GPU tasks
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Dead letter queues for failed jobs

4. **Storage Optimization**:

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - S3 lifecycle policies (move to Glacier after 30 days)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Video compression before storage
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Thumbnail generation for previews

---

## Integration with TTS Folder

The Coqui TTS library will be integrated as follows:

1. **Package Structure**: Create `packages/tts-wrapper/` that wraps Coqui TTS
2. **Worker Integration**: `workers/voice-cloner/` uses the TTS wrapper
3. **API Endpoints**: Expose voice cloning via worker API
4. **Model Management**: Download and cache TTS models on worker startup
5. **Voice Profiles**: Store voice embeddings in database for reuse

**Key TTS Features to Use**:

- XTTS v2 for multilingual voice cloning
- YourTTS for voice cloning
- FreeVC for voice conversion
- Emotion/style parameters (if available)

---

## Critical Architectural Decisions (Locked)

| Area | Decision | Rationale |

|------|----------|-----------|

| Backend Framework | **Fastify** (not Express) | Better WebSocket + queue performance, cleaner TypeScript types |

| Queue System | **BullMQ ONLY** (no Celery/RQ) | Single queue system, workers are HTTP endpoints |

| Worker Pattern | **Dumb executors** (HTTP REST) | Backend manages all queues, workers just process |

| WebSocket Flow | **Backend → Frontend only** | Workers never talk directly to frontend |

| Frontend Editing | **Preview only** | Frontend = intent, Backend/Workers = truth |

| Face Transformation | **Phased approach** | Detection → Swap → Diffusion (avoid GPU hell early) |

## What to Stub vs Real (Velocity Strategy)

### MUST be real early

- Video downloading (yt-dlp)
- FFmpeg trimming
- Job queue (BullMQ)
- Coqui TTS (you already chose well)

### SHOULD be stubbed early

- Face transformation (use placeholder output)
- Lip-sync (static alignment first)
- Background replacement
- Stable Diffusion anything

This avoids burning weeks on GPU hell before UI exists.

## Strategic Positioning

**Position as**: "Historical, educational, and narrative reenactment AI"

**Key messaging**:

- "Digital reenactment"
- "AI historical narration"
- "Mythological visualization"

**NOT**: "deepfake", "impersonation"

Focus on:

- History
- Mythology
- Storytelling
- Education
- Documentaries

This keeps platforms friendly, investors calm, and users confident. Perfect fit for Cyrus/Shah examples.

## Execution Checklist (Cursor Commands)

**Phase 1: Foundation Setup**

1. **Save this plan** as `PLAN.md` in project root
2. **Generate monorepo folder structure**:
   ```
   Using PLAN.md as the single source of truth:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1. Generate the monorepo folder structure only.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           2. Do NOT generate code.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           3. Include all apps/, workers/, packages/, infrastructure/ directories.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           4. Match the plan exactly.
   ```

3. **Generate Prisma schema** for all data models (Project, Clip, Scene, Character, Voice, Job, Render)
4. **Scaffold Fastify backend** with auth, projects CRUD, jobs CRUD
5. **Scaffold Next.js editor shell** with empty timeline and video preview

**Phase 2: First Working System**

6. **Create video-downloader worker** using yt-dlp with REST interface (implements worker contract)
7. **Implement BullMQ job queue** in backend
8. **Connect worker to backend** (job assignment, status updates)
9. **Add WebSocket support** for real-time job progress

**At this point**: You have a **real working system** - users can download videos, see progress, get results.

**Phase 3: Incremental AI Features**

10. Integrate Coqui TTS (voice-cloner worker)
11. Basic face detection (face-transformer worker - Phase 1)
12. Subtitle generation (subtitle-generator worker)
13. Video renderer (multi-format export)

**Do NOT jump ahead** - build one layer at a time.

---

## Final Status

✅ **Architecture**: Production-grade, internally consistent, executable

✅ **Decisions**: All critical choices locked (Fastify, BullMQ-only, workers as HTTP, etc.)

✅ **Contracts**: Worker interface, storage paths, job types all defined

✅ **Safety Rails**: Idempotency keys, model versioning, watermark/disclosure hooks

✅ **Positioning**: Strategic framing locked ("historical reenactment AI")

✅ **Execution Path**: Clear MVP → V2 boundaries, incremental build order

✅ **Worker Contract + Storage Convention**: Enables on-prem GPU, hybrid local/cloud, enterprise installs, air-gapped environments

**This is not vaporware. This is buildable software.**

**No structural contradictions. Ready for senior team execution.**

---

## What This Enables (Reality Check)

With this system, you can *cleanly* support:

- Cyrus / Shah historical reenactments
- Mythological narrators
- Documentary voice restoration
- Multi-language historical retelling
- Script rewriting + reenactment
- Education-safe AI video
- On-prem GPU deployments
- Enterprise installs
- Air-gapped environments

**Without re-architecting.**

Ready to execute.